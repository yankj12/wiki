<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"></meta>
<title>wiki</title>
<!-- simplemde插件将autoDownloadFontAwesome置为false，样式从本地加载 begin -->
<link rel="stylesheet" href="./font-awesome/4.7/css/font-awesome.min.css"/>
<link rel="stylesheet" href="./font-awesome/4.7/fonts/fontawesome-webfont.woff2"/>
<!-- simplemde插件将autoDownloadFontAwesome置为false，样式从本地加载 end -->

<!-- 引入simplemde插件 -->
<link rel="stylesheet" href="./simplemde/dist/simplemde.min.css"/>
<script src="./simplemde/dist/simplemde.min.js"></script>

<!-- 引入jquery' -->
<script src="./jquery/3.3.1/jquery.min.js"></script>

<style>
	body {
		width: 50em;
		margin: 0 auto;
		font-family: Tahoma, Verdana, Arial, sans-serif;
	}
</style>
</head>
<body>
	<form action="/article/input}" onSubmit="return checkContent()">
		<table width="100%">
			<tr>
				<td width="85%">
					<input type="text" id="article_title_edit" name="title" value=""  style="width:100%"/>
				</td>
				<td width="15%" align="middle">
					<input type="button" id="article_title_edit_btn" value="Edit" style="width:90%"/>
				</td>
			</tr>
		</table>
		<table width="100%">
			<tr>
				<td>作者</td>
				<td>
					<input type="text" id="article_author_edit" name="author" th:value=""/>
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<textarea id="article_content_simplemde" name="content" th:text=""></textarea>
				</td>
			</tr>
			<tr>
				<td colspan="2" align="right">
					<input type="button" id="article_save_btn" value="Save"/>
				</td>
			</tr>
			
		</table>
	</form>
</body>
<script>
// 关于simplemde插件的定制化配置，可以在https://github.com/sparksuite/simplemde-markdown-editor查看详细介绍
var simplemde = new SimpleMDE({
								// autoDownloadFontAwesome: If set to true, force downloads Font Awesome (used for icons). If set to false, prevents downloading. 
								// Defaults to undefined, which will intelligently check whether Font Awesome has already been included, then download accordingly.
								autoDownloadFontAwesome: false,
								// spellChecker: If set to false, disable the spell checker. Defaults to true
								spellChecker: false,    //置为false，不会从cdn.jsdelivr.net下载资源
								element: document.getElementById("article_content_simplemde")
								});


function checkContent(){
	var content = simplemde.value();
	//set value
	//simplemde.value("This text will appear in the editor");
	alert(content);
	return true;
}

//获取url中的参数
function getUrlParam(name) {
	var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
	var r = window.location.search.substr(1).match(reg); //匹配目标参数
	if (r != null) return unescape(r[2]); return null; //返回参数值
}

$(document).ready(function(){
	//body onload后处理的事情
	//从url中获取到文章的id
	var articleId = getUrlParam('articleId');
	if(articleId == null || articleId == ''){
		//如果文章id为空，表示是新增，进入页面应该是编辑模式
		//1、标题后面的Edit按钮置为隐藏
		//2、Save左边的按Cancel按钮置为隐藏
		
	}else{
		//如果文章id不为空，表示是修改，进入页面应该是阅读模式
		//根据id异步加载数据
		//1、标题隐藏文本框，改为文本模式，显示Edit
		//2、Save按钮变为Edit
		//3、Cancel按钮隐藏
		//4、文本编辑器变为阅读模式
	}
});
	

</script>
</html>